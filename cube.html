<!-- FILE: cube.html on GitHub -->

<!-- 1. The Container for our 3D Canvas -->
<div id="gl-container" style="width: 100%; height: 100vh; position: fixed; top: 0; left: 0; z-index: -1;"></div>

<!-- 2. Load Three.js from a CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<!-- 3. The Logic -->
<script>
(function() {
    // Safety check: stop if container is missing
    const container = document.getElementById('gl-container');
    if (!container) return;

    // --- Three.js Setup ---
    const scene = new THREE.Scene();
    // Add some fog for depth
    scene.fog = new THREE.FogExp2(0xffffff, 0.002);
    scene.background = new THREE.Color(0xffffff); 

    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
    
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);

    // --- Create a Cube ---
    const geometry = new THREE.BoxGeometry(1.5, 1.5, 1.5);
    const material = new THREE.MeshNormalMaterial({ wireframe: false }); // Colorful normal material
    const cube = new THREE.Mesh(geometry, material);
    scene.add(cube);

    camera.position.z = 5;

    // --- Scroll Logic ---
    // We listen to the MAIN window scroll because this code is injected directly
    function onScroll() {
        const t = document.body.getBoundingClientRect().top;
        // Rotate cube based on scroll position
        cube.rotation.y = t * -0.001;
        cube.rotation.x = t * -0.0005;
        
        // Optional: Move camera slightly
        camera.position.y = t * 0.002;
    }
    
    window.addEventListener('scroll', onScroll);

    // --- Render Loop ---
    function animate() {
        requestAnimationFrame(animate);
        // Idle rotation
        cube.rotation.z += 0.002;
        renderer.render(scene, camera);
    }
    animate();

    // --- Resize Handler ---
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

    console.log("Three.js Scene Loaded via Fetch");
})();
</script>
